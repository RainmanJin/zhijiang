/*

 ____ ___ _   _  ____    _    _   _ ____  _____ ____
|  _ \_ _| \ | |/ ___|  / \  | \ | / ___|| ____/ ___|
| |_) | ||  \| | |  _  / _ \ |  \| \___ \|  _|| |
|  __/| || |\  | |_| |/ ___ \| |\  |___) | |__| |___
|_|  |___|_| \_|\____/_/   \_\_| \_|____/|_____\____|


*/function Map(){this.container=new Object}function SlideButton(t,e){this.btn=t,this.content=e,this.mouseOn=!1;var i=this;this.btn.on({click:function(){i.content.toggle()},mouseenter:function(){i.mouseOn=!0,i.content.show()},mouseleave:function(){i.mouseOn=!1,i.hideContent()}}),this.content.on({mouseenter:function(){i.mouseOn=!0},mouseleave:function(){i.mouseOn=!1,i.hideContent()}})}function SelectHandler(t,e,i){this.items=t;var n=this;t.click(function(s){if(s.preventDefault(),$(this).hasClass("current")){if(i&&1==t.filter(".current").length)return!1;$(this).removeClass("current")}else e||$(this).siblings().removeClass("current"),$(this).addClass("current");return n.selected($(this)),!0})}function initPlaceHolder(t){$.browser.msie&&(t=t&&t.length>0?t:$("[placeholder]")).each(function(){var t=$(this);if(!t.attr("data-placeholdered")){t.attr("data-placeholdered","true");var e=function(e){t.val()===t.attr("placeholder")&&t.css("color","").val("")},i=function(e){t.val()||t.css("color","#ababab").val(t.attr("placeholder"))};if("password"!=t.attr("type"))t.bind("blur",i),t.bind("click",e),t.bind("keydown",e),i();else{var n=function(t,e){e?t.css("display","none").attr("disabled",!0):t.css("display","").attr("disabled",!1)},s=$(t[0].outerHTML.replace(/password/g,"text"));s.removeAttr("name").removeAttr("id"),n(t,!0),s.focus(function(){n(t,!1),n(s,!0),t.val("").focus()}),t.blur(function(){t.val()||(n(s,!1),n(t,!0))}),s.css("color","#ababab").val(t.attr("placeholder")),t.parent().append(s)}}})}function Popover(t,e){this.obj=t,t.tip=e,this.isDefaultPip=!0,/left|right|top|bottom|innerLeft|innerRight/g.test(e)||1!=$(e).length?t.pop=$("<div class='form-msg'></div>"):(t.pop=$(e),this.isDefaultPip=!1)}function malert(t,e,i){var n=.2,s=9999;null!=i&&(n=null==i.opacity?n:i.opacity,s=null==i["z-index"]?s:i["z-index"]);var r="<div id='malert_mask' style='position:absolute;display:none;z-index:"+s+";top:0;left:0; width:100%; height:100%;background-color:black;filter:alpha(opacity="+100*n+");-moz-opacity:"+n+";opacity:"+n+";'></div>";0!=$("#malert_mask").length&&$("#malert_mask").remove(),$("body").append(r);var o=$("#malert_mask"),a=$(window).height()-t.css({position:"absolute","z-index":s+1}).height();a<0&&(a=100),t.css({top:a/3+"px",left:"50%","margin-left":"-"+t.width()/2+"px"}),t.show(),o.show(),o.tap(function(){t.hide(),o.hide(),o.remove()}),e&&e.tap(function(){t.hide(),o.hide(),o.remove()})}function FormItem(t,e){this.obj=t,this.type=t.attr("type"),this.name=t.attr("name"),this.placeholder=t.attr("placeholder"),this.des=t.attr("des"),this.ajax=t.attr("ajax"),this.hastip=t.attr("hastip")?t.attr("ajaxmsg"):"",this.ajaxMsg=t.attr("ajaxmsg")?t.attr("ajaxmsg"):"验证失败",this.compare=t.attr("compare"),this.obj.blur=this.onblur(),this.errors=new Array,this.popover=new Popover(t,void 0==t.attr("msgtip")?"right":t.attr("msgtip")),this.mpopover=e||"",this.obj.keypress=this.keypress(),this.obj.FormItem=this}function mForm(t,e){this.obj=t,this.isAjax=!1;var i=this;t.submit(function(e){for(var n=0;n<t.items.length;n++){var s=t.items[n];if(s.validate(),s.errors.length>0)return e.preventDefault(),!1}return i.beforeSubmit()?!i.isAjax||($.ajax({data:i.obj.serialize(),type:"POST",timeout:1e4,dataType:"json",url:i.obj.attr("action"),success:function(t){i.afterSubmit(t)},error:function(){i.submitError()},complete:function(){i.completeSubmit()},beforeSend:function(){i.loadDate()}}),e.preventDefault(),!1):(e.preventDefault(),!1)}),this.initItems=function(){t.items=new Array,t.find("[name]").each(function(){t.items.push(new FormItem($(this),e))})},this.initItems()}function ContentUtil(t){this.obj=t}function URLHandler(t){this.url=t,this.uri=t,this.basePath=this.uri,this.absolutePath=this.uri,this.params=new Map,this.init()}function PageHandler(t){this.init(t)}function SelectDiv(t,e){this.items=t,this.doms=e,t.click(function(t){$(t.currentTarget).index();e.hide(),e.eq($(t.currentTarget).index()).show()})}function TipShow(t,e){this.items=t,this.doms=e,this.init()}function SelectItem(t,e,i){this.items=t,t.click(function(n){if(n.preventDefault(),$(this).hasClass("current")){if(i&&1==t.filter(".current").length)return!1;$(this).removeClass("current")}else e||this.items.removeClass("current"),$(n.currentTarget).addClass("current")}.bind(this))}function SelectItemHref(t,e,i){this.items=t,t.click(function(n){if(n.preventDefault(),$(this).hasClass("current")){if(i&&1==t.filter(".current").length)return!1;$(this).removeClass("current")}else e||this.items.removeClass("current"),window.location.href=$(n.currentTarget).attr("hr"),$(n.currentTarget).addClass("current")}.bind(this))}var RSF={regist:function(t,e){e=e||function(){};for(var i=t.split("."),n=window,s=0;s<i.length;s++){if(s!=i.length-1)void 0===n[i[s]]&&(n[i[s]]={});else{if(void 0!==n[i[s]])throw t+"命名空间重复,请修改！";n[i[s]]=e}n=n[i[s]]}},log:function(t){"undefined"==typeof console||console.log(t)},callIndex:0,callBacks:[],addCallback:function(t){var e=++this.callIndex;return this.callBacks[e]=t,e},excuteCallback:function(t){this.callBacks[t]&&this.callBacks[t]()},get_json_cross_domain:function(t,e,i){var n=this.addCallback(i);-1==t.indexOf("?")?t+="?":t+="&";for(k in e)t+=k+"="+encodeURIComponent(e[k])+"&";t+="callback="+encodeURIComponent("RSF.callBacks["+n+"]");var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src=t,document.body.appendChild(s)},getKeys:function(t){var e=[];for(k in t)e.push(k);return e},copyJson:function(t){var e={};for(k in t)e[k]=t[k];return e},deepCopyJson:function(t,e){if("object"==typeof t){if(t instanceof Array){e||(e=new Array);for(var i=t.length,n=0;n<i;n++)"object"!=typeof t[n]?e[n]=t[n]:(t[n]instanceof Array?e[n]=new Array:e[n]=new Object,this.deepCopyJson(t[n],e[n]))}else{e||(e=new Object);for(var s in t)"object"!=typeof t[n]?e[s]=t[s]:(t[s]instanceof Array?e[s]=new Array:e[s]=new Object,this.deepCopyJson(t[s],e[s]))}return e}return t},getCookie:function(t){for(var e=document.cookie.split("; "),i=0;i<e.length;i++){var n=e[i].split("=");if(n[0]==t)return n[1]||""}return""},setCookie:function(t,e,i,n,s,r){var o=new Date;o.setTime(o.getTime()+i),document.cookie=escape(t)+"="+escape(e)+(o?"; expires="+o.toGMTString():"")+(n?"; path="+n:"/")+(s?"; domain="+s:"")+(r?"; secure":"")},getParent:function(t,e,i){t.extend=e,t.extend.apply(t,i),t.extend=null,delete t.extend}};Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;return function(){return e.apply(t,arguments)}}),Array.prototype.each=function(t){for(var e=0;e<this.length;e++)t(e,this[e])},Array.prototype.removeAtIndex=function(t){return this.slice(t,1)},String.prototype.reverse=function(){return this.split("").reverse().join("")},function(t){"use strict";function e(t){if(t)l[0]=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0,this.blocks=l,this.buffer8=n;else if(o){var e=new ArrayBuffer(68);this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=0,this.finalized=this.hashed=!1,this.first=!0}var i="object"==typeof process&&process.versions&&process.versions.node;i&&(t=global);var n,s=!t.JS_MD5_TEST&&"object"==typeof module&&module.exports,r="function"==typeof define&&define.amd,o=!t.JS_MD5_TEST&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),h=[128,32768,8388608,-2147483648],c=[0,8,16,24],u=["hex","array","digest","buffer","arrayBuffer"],l=[];if(o){var d=new ArrayBuffer(68);n=new Uint8Array(d),l=new Uint32Array(d)}var f=function(t){return function(i){return new e(!0).update(i)[t]()}},p=function(e){var i,n;try{if(t.JS_MD5_TEST)throw"JS_MD5_TEST";i=require("crypto"),n=require("buffer").Buffer}catch(t){return console.log(t),e}return function(t){if("string"==typeof t)return i.createHash("md5").update(t,"utf8").digest("hex");if(t.constructor==ArrayBuffer)t=new Uint8Array(t);else if(void 0===t.length)return e(t);return i.createHash("md5").update(new n(t)).digest("hex")}};e.prototype.update=function(e){if(!this.finalized){var i="string"!=typeof e;i&&e.constructor==t.ArrayBuffer&&(e=new Uint8Array(e));for(var n,s,r=0,a=e.length||0,h=this.blocks,u=this.buffer8;r<a;){if(this.hashed&&(this.hashed=!1,h[0]=h[16],h[16]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=0),i)if(o)for(s=this.start;r<a&&s<64;++r)u[s++]=e[r];else for(s=this.start;r<a&&s<64;++r)h[s>>2]|=e[r]<<c[3&s++];else if(o)for(s=this.start;r<a&&s<64;++r)(n=e.charCodeAt(r))<128?u[s++]=n:n<2048?(u[s++]=192|n>>6,u[s++]=128|63&n):n<55296||n>=57344?(u[s++]=224|n>>12,u[s++]=128|n>>6&63,u[s++]=128|63&n):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++r)),u[s++]=240|n>>18,u[s++]=128|n>>12&63,u[s++]=128|n>>6&63,u[s++]=128|63&n);else for(s=this.start;r<a&&s<64;++r)(n=e.charCodeAt(r))<128?h[s>>2]|=n<<c[3&s++]:n<2048?(h[s>>2]|=(192|n>>6)<<c[3&s++],h[s>>2]|=(128|63&n)<<c[3&s++]):n<55296||n>=57344?(h[s>>2]|=(224|n>>12)<<c[3&s++],h[s>>2]|=(128|n>>6&63)<<c[3&s++],h[s>>2]|=(128|63&n)<<c[3&s++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++r)),h[s>>2]|=(240|n>>18)<<c[3&s++],h[s>>2]|=(128|n>>12&63)<<c[3&s++],h[s>>2]|=(128|n>>6&63)<<c[3&s++],h[s>>2]|=(128|63&n)<<c[3&s++]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this}},e.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[e>>2]|=h[3&e],e>=56&&(this.hashed||this.hash(),t[0]=t[16],t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.bytes<<3,this.hash()}},e.prototype.hash=function(){var t,e,i,n,s,r,o=this.blocks;this.first?e=((e=((t=((t=o[0]-680876937)<<7|t>>>25)-271733879<<0)^(i=((i=(-271733879^(n=((n=(-1732584194^2004318071&t)+o[1]-117830708)<<12|n>>>20)+t<<0)&(-271733879^t))+o[2]-1126478375)<<17|i>>>15)+n<<0)&(n^t))+o[3]-1316259209)<<22|e>>>10)+i<<0:(t=this.h0,e=this.h1,i=this.h2,e=((e+=((t=((t+=((n=this.h3)^e&(i^n))+o[0]-680876936)<<7|t>>>25)+e<<0)^(i=((i+=(e^(n=((n+=(i^t&(e^i))+o[1]-389564586)<<12|n>>>20)+t<<0)&(t^e))+o[2]+606105819)<<17|i>>>15)+n<<0)&(n^t))+o[3]-1044525330)<<22|e>>>10)+i<<0),e=((e+=((t=((t+=(n^e&(i^n))+o[4]-176418897)<<7|t>>>25)+e<<0)^(i=((i+=(e^(n=((n+=(i^t&(e^i))+o[5]+1200080426)<<12|n>>>20)+t<<0)&(t^e))+o[6]-1473231341)<<17|i>>>15)+n<<0)&(n^t))+o[7]-45705983)<<22|e>>>10)+i<<0,e=((e+=((t=((t+=(n^e&(i^n))+o[8]+1770035416)<<7|t>>>25)+e<<0)^(i=((i+=(e^(n=((n+=(i^t&(e^i))+o[9]-1958414417)<<12|n>>>20)+t<<0)&(t^e))+o[10]-42063)<<17|i>>>15)+n<<0)&(n^t))+o[11]-1990404162)<<22|e>>>10)+i<<0,e=((e+=((t=((t+=(n^e&(i^n))+o[12]+1804603682)<<7|t>>>25)+e<<0)^(i=((i+=(e^(n=((n+=(i^t&(e^i))+o[13]-40341101)<<12|n>>>20)+t<<0)&(t^e))+o[14]-1502002290)<<17|i>>>15)+n<<0)&(n^t))+o[15]+1236535329)<<22|e>>>10)+i<<0,e=((e+=((n=((n+=(e^i&((t=((t+=(i^n&(e^i))+o[1]-165796510)<<5|t>>>27)+e<<0)^e))+o[6]-1069501632)<<9|n>>>23)+t<<0)^t&((i=((i+=(t^e&(n^t))+o[11]+643717713)<<14|i>>>18)+n<<0)^n))+o[0]-373897302)<<20|e>>>12)+i<<0,e=((e+=((n=((n+=(e^i&((t=((t+=(i^n&(e^i))+o[5]-701558691)<<5|t>>>27)+e<<0)^e))+o[10]+38016083)<<9|n>>>23)+t<<0)^t&((i=((i+=(t^e&(n^t))+o[15]-660478335)<<14|i>>>18)+n<<0)^n))+o[4]-405537848)<<20|e>>>12)+i<<0,e=((e+=((n=((n+=(e^i&((t=((t+=(i^n&(e^i))+o[9]+568446438)<<5|t>>>27)+e<<0)^e))+o[14]-1019803690)<<9|n>>>23)+t<<0)^t&((i=((i+=(t^e&(n^t))+o[3]-187363961)<<14|i>>>18)+n<<0)^n))+o[8]+1163531501)<<20|e>>>12)+i<<0,e=((e+=((n=((n+=(e^i&((t=((t+=(i^n&(e^i))+o[13]-1444681467)<<5|t>>>27)+e<<0)^e))+o[2]-51403784)<<9|n>>>23)+t<<0)^t&((i=((i+=(t^e&(n^t))+o[7]+1735328473)<<14|i>>>18)+n<<0)^n))+o[12]-1926607734)<<20|e>>>12)+i<<0,e=((e+=((r=(n=((n+=((s=e^i)^(t=((t+=(s^n)+o[5]-378558)<<4|t>>>28)+e<<0))+o[8]-2022574463)<<11|n>>>21)+t<<0)^t)^(i=((i+=(r^e)+o[11]+1839030562)<<16|i>>>16)+n<<0))+o[14]-35309556)<<23|e>>>9)+i<<0,e=((e+=((r=(n=((n+=((s=e^i)^(t=((t+=(s^n)+o[1]-1530992060)<<4|t>>>28)+e<<0))+o[4]+1272893353)<<11|n>>>21)+t<<0)^t)^(i=((i+=(r^e)+o[7]-155497632)<<16|i>>>16)+n<<0))+o[10]-1094730640)<<23|e>>>9)+i<<0,e=((e+=((r=(n=((n+=((s=e^i)^(t=((t+=(s^n)+o[13]+681279174)<<4|t>>>28)+e<<0))+o[0]-358537222)<<11|n>>>21)+t<<0)^t)^(i=((i+=(r^e)+o[3]-722521979)<<16|i>>>16)+n<<0))+o[6]+76029189)<<23|e>>>9)+i<<0,e=((e+=((r=(n=((n+=((s=e^i)^(t=((t+=(s^n)+o[9]-640364487)<<4|t>>>28)+e<<0))+o[12]-421815835)<<11|n>>>21)+t<<0)^t)^(i=((i+=(r^e)+o[15]+530742520)<<16|i>>>16)+n<<0))+o[2]-995338651)<<23|e>>>9)+i<<0,e=((e+=((n=((n+=(e^((t=((t+=(i^(e|~n))+o[0]-198630844)<<6|t>>>26)+e<<0)|~i))+o[7]+1126891415)<<10|n>>>22)+t<<0)^((i=((i+=(t^(n|~e))+o[14]-1416354905)<<15|i>>>17)+n<<0)|~t))+o[5]-57434055)<<21|e>>>11)+i<<0,e=((e+=((n=((n+=(e^((t=((t+=(i^(e|~n))+o[12]+1700485571)<<6|t>>>26)+e<<0)|~i))+o[3]-1894986606)<<10|n>>>22)+t<<0)^((i=((i+=(t^(n|~e))+o[10]-1051523)<<15|i>>>17)+n<<0)|~t))+o[1]-2054922799)<<21|e>>>11)+i<<0,e=((e+=((n=((n+=(e^((t=((t+=(i^(e|~n))+o[8]+1873313359)<<6|t>>>26)+e<<0)|~i))+o[15]-30611744)<<10|n>>>22)+t<<0)^((i=((i+=(t^(n|~e))+o[6]-1560198380)<<15|i>>>17)+n<<0)|~t))+o[13]+1309151649)<<21|e>>>11)+i<<0,e=((e+=((n=((n+=(e^((t=((t+=(i^(e|~n))+o[4]-145523070)<<6|t>>>26)+e<<0)|~i))+o[11]-1120210379)<<10|n>>>22)+t<<0)^((i=((i+=(t^(n|~e))+o[2]+718787259)<<15|i>>>17)+n<<0)|~t))+o[9]-343485551)<<21|e>>>11)+i<<0,this.first?(this.h0=t+1732584193<<0,this.h1=e-271733879<<0,this.h2=i-1732584194<<0,this.h3=n+271733878<<0,this.first=!1):(this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+i<<0,this.h3=this.h3+n<<0)},e.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,i=this.h2,n=this.h3;return a[t>>4&15]+a[15&t]+a[t>>12&15]+a[t>>8&15]+a[t>>20&15]+a[t>>16&15]+a[t>>28&15]+a[t>>24&15]+a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15]+a[i>>4&15]+a[15&i]+a[i>>12&15]+a[i>>8&15]+a[i>>20&15]+a[i>>16&15]+a[i>>28&15]+a[i>>24&15]+a[n>>4&15]+a[15&n]+a[n>>12&15]+a[n>>8&15]+a[n>>20&15]+a[n>>16&15]+a[n>>28&15]+a[n>>24&15]},e.prototype.toString=e.prototype.hex,e.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,i=this.h2,n=this.h3;return[255&t,t>>8&255,t>>16&255,t>>24&255,255&e,e>>8&255,e>>16&255,e>>24&255,255&i,i>>8&255,i>>16&255,i>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255]},e.prototype.array=e.prototype.digest,e.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(16),e=new Uint32Array(t);return e[0]=this.h0,e[1]=this.h1,e[2]=this.h2,e[3]=this.h3,t},e.prototype.buffer=e.prototype.arrayBuffer;var g=function(){var t=f("hex");i&&(t=p(t)),t.create=function(){return new e},t.update=function(e){return t.create().update(e)};for(var n=0;n<u.length;++n){var s=u[n];t[s]=f(s)}return t}();s?module.exports=g:(t.md5=g,r&&define(function(){return g}))}(this),RSF.regist("ShuidiGoback"),ShuidiGoback=function(){},ShuidiGoback.prototype={getLoginBackUrl:function(){if(window.localStorage)return localStorage.getItem("loginBackUrl")},setLoginBackUrl:function(t){if(window.localStorage){var e=t||location.href;localStorage.setItem("loginBackUrl",e)}},clearLoginBackUrl:function(){window.localStorage&&localStorage.removeItem("loginBackUrl")},loginBack:function(){var t=this.getLoginBackUrl();""!=t&&null!=t&&"passwordback"!=t.split("/")[3]&&"regist"!=t.split("/")[3]?(this.clearLoginBackUrl(),location.href=t):location.href="/puser"},login:function(t){this.setLoginBackUrl(t),location.href="/login"}},RSF.regist("ShuidiFrame"),ShuidiFrame=function(){this.init=function(){$.fn.tap=function(t){this.each(function(e,i){Zepto(i).tap(t)})},$.fn.longTap=function(t){this.each(function(e,i){Zepto(i).longTap(t)})},FastClick.attach(document.body),$(".back").length>0&&$(".back").tap(function(t){history.go(-1)}),$(".login-a").length>0&&($(".login-a").hide(),RSF.getCookie("shuidi_user_id")?$(".login-out").show():$(".login-in").show()),$(".login-in").tap(function(){(new ShuidiGoback).setLoginBackUrl(),location.href="/login"}),$(".login-out").tap(function(){$.ajax({url:"/user",data:{action:"logout"},success:function(t){0==t.status&&(location.href="/login")}})}),$(".mask").length<1&&$("body").prepend('<div class="mask"></div>'),$(".user-nav-logo").tap(function(t){$(".mask").toggle(),$(".nav-plats ").toggle()}),$(".mask").tap(function(t){$(".mask").hide(),$(".nav-plats ").hide()})}},ShuidiFrame.createMsgTip=function(){return new function(){0===$(".util-msgtip").length&&$("body").append('<div class="util-msgtip"><label data-msg></label></div>'),this.tip=$(".util-msgtip"),this.cont=this.tip.find("[data-msg]"),this.show=function(t,e){this.cont.html(t),this.tip.show(),setTimeout(function(t){t.hide(),e&&e()},2e3,this.tip)}}},ShuidiFrame.loadFailed=function(t){$(".loading-normal").find(".limg").remove(),$(".loading-normal").find("label").html("string"==typeof t?t:"加载失败，请刷新重试！")},ShuidiFrame.loadSuccess=function(){$(".container, .footer").show(),$(".loading-normal").hide()},ShuidiFrame.getScreenWidth=function(){return $(document.body).width()},ShuidiFrame.getScreenHeight=function(){return $(document.body).height()},ShuidiFrame.getRealPx=function(t,e){return e=e||1080,Math.round(ShuidiFrame.getScreenWidth()/e*t)},RSF.regist("Util"),Map.prototype={put:function(t,e){this.container[t]=e},get:function(t){return this.container[t]},keySet:function(){var t=new Array,e=0;for(var i in this.container)"extend"!=i&&(t[e]=i,e++);return t},size:function(){var t=0;for(var e in this.container)"extend"!=e&&t++;return t},remove:function(t){delete this.container[t]}},Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in e)if(new RegExp("("+i+")").test(t)){for(var n="",s=1;s<=RegExp.$1.length;s++)n+="0";var r="";if(1==RegExp.$1.length)r=e[i];else{n+=e[i];var o=(""+e[i]).length;r=n=n.substr(o)}t=t.replace(RegExp.$1,r)}return t.replace(/NaN-aN-aN/g,"")},String.prototype.isUrl=function(){return new RegExp("^[A-Za-z]+://[A-Za-z0-9-_]+\\.[A-Za-z0-9-_%&?/.=]+$").test(this)},String.prototype.isEmail=function(){return/(^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$)/.test(this)},String.prototype.isDomain=function(){for(var t=this,e=new RegExp(/^((([A-Za-z0-9_-\u4E00-\u9FA5])|(\*))+\.)?([A-Za-z0-9_-\u4E00-\u9FA5]{1,200})$/),i=new Array(".gov.mo",".com.tw",".com.mo",".co.cc",".ce.ms",".osa.pl",".c.la",".com.hk",".net.in",".edu.tw",".org.tw",".bij.pl",".ac.cn",".ah.cn",".bj.cn",".com.cn",".cq.cn",".fj.cn",".gd.cn",".gov.cn",".gs.cn",".gx.cn",".gz.cn",".ha.cn",".hb.cn",".he.cn",".hi.cn",".hk.cn",".hl.cn",".hn.cn",".jl.cn",".js.cn",".jx.cn",".ln.cn",".mo.cn",".net.cn",".nm.cn",".nx.cn",".org.cn",".qh.cn",".sc.cn",".sd.cn",".sh.cn",".sn.cn",".sx.cn",".tj.cn",".tw.cn",".xj.cn",".xz.cn",".yn.cn",".zj.cn",".nl.ae",".org.uk",".org.nz",".org.bz",".org.au",".com.nu",".com.my",".com.au",".co.uk",".co.kr",".co.jp",".nu.ae",".nl.ae",".com.au",".cf.gs",".com.cn",".net.cn",".org.cn",".edu.cn",".com",".cn",".mobi",".tel",".asia",".net",".org",".name",".me",".info",".cc",".hk",".biz",".tv",".la",".fm",".cm",".am",".sh",".us",".in",".ro",".ru",".hu",".tk",".co",".cx",".at",".tw",".ws",".vg",".vc",".uz",".to",".tl",".th",".tf",".tc",".st",".so",".sk",".sg",".sc",".pl",".pe",".nu",".nf",".ne",".my",".mu",".ms",".mo",".lv",".lt",".lc",".jp",".it",".io",".im",".ie",".gs",".gp",".gl",".gg",".gd",".fr",".fi",".eu",".edu",".dk",".de",".cz",".ch",".ca",".bi",".be",".au",".ae",".pw",".ly",".wang",".ren",".top",".club"),n=!1,s=0;s<i.length;s++){var r=i[s],o="(\\"+r+")$";new RegExp(o).test(t.toLowerCase())&&(n=!0),t=t.replace(r,"")}return!!n&&e.test(t)},String.prototype.isZipCode=function(){return/^[0-9]{6}$/.test(this)},String.prototype.isPhone=function(){return/((^(\+86)|(86))?(((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$))/.test(this)},String.prototype.isMobile=function(){return/^((\+86)|(86))*(\d{11})$/.test(this)},String.prototype.isNumber=function(){return/^[0-9\.]+$/.test(this)},String.prototype.isId=function(){return/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/.test(this)},String.prototype.format=function(){var t=arguments;return this.replace(/\{(\d+)\}/g,function(e,i){return t[i]})},$.fn.longPress=function(){return},SlideButton.prototype.hideContent=function(){var t=this;window.setTimeout(function(){t.mouseOn||t.content.hide()},300)},SelectHandler.prototype={clear:function(){this.items.removeClass("current")},selected:function(t){}},Util.MobilePopover=function(t){this.obj=t||$(".container-content"),this.isDefaultPip=!0,this.pop=$("<div class='feedback'><span></span></div>"),$(".feedback").length<1&&this.obj.append(this.pop),this.timer=null},Util.MobilePopover.prototype={show:function(t,e){$(".feedback").is(":hidden")||clearTimeout(this.timer),this.pop.find("span").html(t),this.pop.show(),this.timer=setTimeout(function(){this.pop.hide(),e&&e()}.bind(this),2e3)},hide:function(){this.pop.hide(),clearTimeout(this.timer)}},Popover.prototype={show:function(t){this.obj.pop.html(t).show(),this.isDefaultPip&&this.position(this.obj.tip)},hide:function(){this.obj.pop.hide()},position:function(t){var e=this.obj;e.parent().append(e.pop),e.pop.css({position:"absolute",padding:"10px","white-space":"nowrap"});var i=e[0].offsetLeft,n=e[0].offsetTop,s=e[0].offsetWidth,r=e[0].offsetHeight,o=e.pop[0].offsetWidth,a=e.pop[0].offsetHeight;switch(t){case"left":i-=o,n=n+r/2-a/2;break;case"top":i+=o/2,n-=a;break;case"right":i+=s,n=n+r/2-a/2;break;case"bottom":i+=o/2,n+=r;break;case"innerLeft":i=i+s-o,n=n+r/2-a/2;break;case"innerRight":n=n+r/2-a/2}e.pop.css({left:i+"px",top:n+"px"})}},FormItem.prototype={keypress:function(){var t=this;t.obj.keypress(function(e){if(t.getLength()+1>Number(t.obj.attr("maxlength")))return e.preventDefault(),!1})},onblur:function(){var t=this;t.obj.blur(function(){t.validate()})},validate:function(){return this.obj.val()===this.placeholder&&this.obj.val(""),this.removeError(),!!this.checkLength()&&(!!this.checkType()&&(!!this.checkNull()&&(!!this.checkAjax()&&(!!this.checkCompare()&&(this.removeError(),!0)))))},checkType:function(){var t=!1,e=this.obj.val().replace(/\s*/g,"");if(""==e&&isNaN(Number(this.obj.attr("minlength"))))return!0;if(void 0==this.type||""==this.type)return!0;var i=new Array;-1!=this.type.indexOf(",")?i=this.type.replace(/\s*/g,"").split(","):i.push(this.type);for(var n=0;n<i.length;n++){if(type=i[n],type&&""!=type)switch(type){case"email":t=e.isEmail();break;case"number":t=e.isNumber();break;case"phone":t=e.isPhone();break;case"mobile":t=e.isMobile();break;case"zipcode":t=e.isZipCode();break;case"domain":t=e.isDomain();break;case"url":t=e.isUrl();break;case"id":t=e.isId();break;default:t=!0}if(t)break}return t||this.addError(2),t},getLength:function(){var t=this.obj.val().replace(/\s*/g,"").length;return t=/text|password/.test(this.type)?this.obj.val().length:t},checkLength:function(){var t=this.getLength();return!isNaN(Number(this.obj.attr("minlength")))&&t<Number(this.obj.attr("minlength"))?(0==t?this.addError(1):this.addError(2),!1):!(!isNaN(Number(this.obj.attr("maxlength")))&&t>Number(this.obj.attr("maxlength")))||(this.addError(2),!1)},checkNull:function(){var t=this.getLength();return"ture"!=this.obj.attr("notnul")||(0!=t&&""!=this.obj[0].value.replace(/\s*/g,"")||this.addError(3),!1)},checkAjax:function(){var t=!0;if(this.ajax){var e=this;$.ajax({url:this.ajax,async:!1,data:this.name+"="+this.obj.val(),success:function(i){i||(e.addError(3),t=!1)}})}return t},checkCompare:function(){if(!this.compare)return!0;var t=this.compare.split(","),e="";switch(t[0]){case"==":e="{0}和{1}不一致";for(var i=1;i<t.length;i++){var n=$(t[i]);if(this.obj.val()!=n.val())return this.addError(e.format(this.des,n.attr("des"))),!1}}return!0},addError:function(t){var e=void 0==this.obj.attr("des")?"":this.obj.attr("des"),i="";if(isNaN(Number(t)))i=t,this.errors.push(0);else{switch(t){case 1:i="请输入"+e;break;case 2:i=e+"格式不正确";break;case 3:i=this.ajaxMsg}this.errors.push(t)}this.hastip?(this.mpopover.show(i),this.popover.show("")):this.popover.show(i)},removeError:function(){this.errors=new Array,this.popover.hide()}},mForm.prototype={getItem:function(t){for(var e=0;e<this.obj.items.length;e++){var i=this.obj.items[e];if(i.name==t)return i}},beforeSubmit:function(){return!0},submitError:function(){return!0},completeSubmit:function(){return!0},loadDate:function(){return!0},afterSubmit:function(t){return!0}},ContentUtil.prototype={setTitle:function(){this.obj.each(function(){$(this).attr("title",$(this).html())})},maxLength:function(){var t=this;this.obj.each(function(){var e=$(this).html(),i=$(this).attr("maxlength");void 0!=i&&($(this).data("html",e),e.length>i&&($(this).html(e.substring(0,i)+"<a more='on' href='javascript:void(0)'  style='color:#45a9ff;'>...更多</a>"),t.maxlengthfilter_bangding($(this).find("[more]"))))})},maxlengthfilter_bangding:function(t){var e=this;t.click(function(){var i=t.parent();"on"==t.attr("more")?i.html(i.data("html")+"<a more='off' href='javascript:void(0)' style='color:#45a9ff;'>&nbsp收起</a>"):i.html(i.data("html").substring(0,i.attr("maxlength"))+"<a more='on' href='javascript:void(0)' style='color:#45a9ff;'>…更多</a>"),e.maxlengthfilter_bangding(i.find("[more]"))})}},URLHandler.prototype={init:function(){var t=this.url.split("?");if(this.uri=t[0],this.url.split("/").length>3){var e=this.uri.split("/");this.basePath=e.splice(0,3).join("/"),this.absolutePath="/"+e[e.length-1]}if(-1==this.url.indexOf("?"))return!0;var i=t[1];i=-1==(i=-1===i.indexOf("#")?i:i.split("#")[0]).indexOf("&")?[i]:i.split("&");for(var n=0;n<i.length;n++)if(-1!=i[n].indexOf("=")){var s=i[n].split("=");this.params.put(s[0],decodeURIComponent(s[1]))}else this.params.put(i[n],i[n])},createUrl:function(){for(var t="",e="",i=0,n=this.params.keySet(),s=n.length;i<s;i++)t+=e+n[i]+"="+encodeURIComponent(this.params.get(n[i])),e="&";return""!=t?this.uri+"?"+t:this.uri},turn:function(){window.location.href=this.createUrl()}},PageHandler.prototype={init:function(t){this.content=t.content,this.pin=t.pin?t.pin:5,this.urlHandler=t.urlHandler,this.isAjax=!t.isAjax||t.isAjax,this.pContent=$(this.content.attr("page")),this.npage=void 0==t.npage?1:t.npage,this.spage=void 0==t.spage?1:t.spage,this.fpage=void 0!=t.fpage&&t.fpage,this.lpage=void 0!=t.lpage&&t.lpage,this.djudage=void 0!=t.djudage&&t.djudage,this.dnone=void 0==t.dnone?$(".data-no-tip"):t.dnone,this.content.find("[model]")&&(this.itemModel=this.content.find("[model]").clone().removeAttr("model").removeAttr("style")[0].outerHTML)},createPage:function(){for(var t=this,e=this.npage-this.pin>0?this.npage-this.pin:1,i=e+2*this.pin>this.spage?this.spage:e+2*this.pin,n="",s="<a href='javascript:void(0)' class='{0}' page='{1}'>{2}</a>",r=e=i-2*this.pin>0?i-2*this.pin:e;r<=i;r++){var o=r==this.npage?"current":"";n+=s.format(o,r,r)}this.npage>1&&(n=s.format("",Number(this.npage)-1,"上一页")+n,this.fpage&&(n=s.format("",1,"首页")+n)),this.npage<this.spage&&(n+=s.format("",Number(this.npage)+1,"下一页"),this.fpage&&(n+=s.format("",Number(this.spage),"尾页"))),n=this.npage==this.spage&&1==this.npage?"":n,this.pContent.find("p").html(n),this.pContent.find("a").click(function(){t.go($(this).attr("page"))})},go:function(t){(t=Number(t))>0&&t<=this.spage&&(this.npage=t,this.urlHandler.params.put("page",t),this.isAjax?this.loadData():this.urlHandler.turn())},loadData:function(){var t=this;$.getJSON(this.urlHandler.createUrl(),{},function(e){this.dataBackNone(e),t.content.html("");for(var i=e.list,n=0;n<i.length;n++){var s=i[n];t.content.append(t.formateItem(n,t.itemModel,s))}t.spage=e.page_count,t.createPage()}.bind(this))},dataBackNone:function(t){this.djudage&&(0==t.list.length?this.dnone.show():this.dnone.hide())},formateItem:function(t,e,i){}},RSF.regist("Util.device"),Util.device={isIphone:function(){return/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)},isAndroid:function(){return/(Android)/i.test(navigator.userAgent)},isMobile:function(){return this.isIphone()||this.isAndroid()}},Util.getSerial=function(){var t=parseInt((new Date).getTime()/1e3)-DIS;t+="";for(var e=md5(t).split(""),i=0;i<t.length;i++)e[2*i]=t[i];return e.join("")},jQuery.extend({postJSON:function(t,e,i){$.post(t,e,function(t){i.call(this,t)})}}),RSF.regist("Util.DatePicker"),Util.DatePicker=function(){this.maxYear="",this.minYear="",this.date=null,this.container=null},Util.DatePicker.prototype={leftZero:function(t){return t=parseInt(t),t>=10?t:"0"+t},getDateIndex:function(){return this.container.find(".picker_year").val()+this.leftZero(this.container.find(".picker_month").val())+this.leftZero(this.container.find(".picker_day").val())},getDateString:function(){return this.container.find(".picker_year").val()+"-"+this.leftZero(this.container.find(".picker_month").val())+"-"+this.leftZero(this.container.find(".picker_day").val())},setDateByNum:function(t,e,i){var n=new Date;n.setFullYear(t),n.setMonth(e-1),n.setDate(i),this.setDate(n)},setDate:function(t){this.curYear=t.getFullYear(),this.curMonth=t.getMonth()+1,this.curDay=t.getDate(),this.container.find(".picker_year").val(this.curYear),this.container.find(".picker_month").val(this.curMonth),this.initDay()},setDefault:function(){this.date=new Date,this.curYear=this.date.getFullYear(),this.curMonth=this.date.getMonth()+1,this.curDay=this.date.getDate(),this.maxYear||(this.maxYear=2023),this.minYear||(this.minYear=1970),this.initYear(),this.initMonth(),this.initDay()},init:function(t){this.container=t,this.setDefault()},initYear:function(){this.container.find(".picker_year")[0]||$('<select class="picker_year"></select>').appendTo(this.container);for(var t=0,e=this.minYear;e<=this.maxYear;e++){var i=new Option(e+"年",e);this.container.find(".picker_year")[0].options[t++]=i}this.container.find(".picker_year").val(this.curYear),this.container.find(".picker_year").unbind("change"),this.container.find(".picker_year").change(function(t){this.curDay=this.container.find(".picker_day").val(),this.initDay()}.bind(this))},initMonth:function(){this.container.find(".picker_month")[0]||$('<select class="picker_month"></select>').appendTo(this.container);for(var t=0,e=1;e<=12;e++){var i=new Option(e+"月",e);this.container.find(".picker_month")[0].options[t++]=i}this.container.find(".picker_month").val(this.curMonth),this.container.find(".picker_month").unbind("change"),this.container.find(".picker_month").change(function(t){this.curDay=this.container.find(".picker_day").val(),this.initDay()}.bind(this))},getDaysByMonth:function(t,e){if(t=parseInt(t),e=parseInt(e),!t||!e)return 31;var i=e%400==0||e%4==0&&e%100!=0;if(2==t)return i?29:28;switch(t){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;default:return 30}},initDay:function(){this.container.find(".picker_day")[0]||$('<select class="picker_day"></select>').appendTo(this.container);var t=0,e=this.getDaysByMonth(this.container.find(".picker_month").val(),this.container.find(".picker_year").val());this.container.find(".picker_day")[0].options.length=0;for(var i=1;i<=e;i++){var n=new Option(i+"日",i);this.container.find(".picker_day")[0].options[t++]=n}this.curDay>e&&(this.curDay=1),this.container.find(".picker_day").val(this.curDay)}},RSF.regist("Util.getWeiboLength"),Util.getWeiboLength=function(t){for(var e=0,i=0;i<t.length;i++)t.charCodeAt(i)>255?e++:e+=.5;return Math.ceil(e)},RSF.regist("Util.InputControl"),Util.InputControl=function(){this.inputId="",this.maxNum="",this.overCallback=function(){},this.lastValue="",this.valueChangeCallback=function(){}},Util.InputControl.prototype={init:function(t,e,i,n){i=i||function(){},n=n||function(){},this.inputId="#"+t,this.maxNum=e,this.overCallback=n,this.valueChangeCallback=i,this.bindEvent()},bindEvent:function(){$(this.inputId).unbind("propertychange"),$(this.inputId).unbind("input"),$(this.inputId).bind("propertychange input",this.valueChange.bind(this))},valueChange:function(t){var e=Util.getWeiboLength($(this.inputId).val());e>this.maxNum?($(this.inputId).val(this.lastValue),this.overCallback()):this.valueChangeCallback(e),this.lastValue=$(this.inputId).val()}},RSF.regist("UploadFile"),UploadFile=function(){this.uploadImageUrl="http://upload.pacra.cn/uploadimage",this.fileIndex=0,this.fileInput=null},UploadFile.prototype={uploadImage:function(t){this.fileInput=t,this.startUpload()},startUpload:function(){this.upload(this.fileInput,this.uploadImageUrl)},upload:function(t,e,i){if(i=i||"file",this.fileIndex<t.files.length){var n=t.files[this.fileIndex++];if(n){var s=new FormData;s.append(i,n);var r=new XMLHttpRequest;r.upload.addEventListener("progress",this.uploadProgress.bind(this),!1),r.addEventListener("load",this.uploadCompleteHandler.bind(this),!1),r.addEventListener("error",this.uploadError.bind(this),!1),r.addEventListener("abort",this.uploadAbort.bind(this),!1),r.open("POST",e),r.send(s)}}},uploadCompleteHandler:function(t){this.startUpload(),this.uploadComplete(t)},uploadProgress:function(t){},uploadComplete:function(t){},uploadError:function(t){},uploadAbort:function(t){}},UploadFile.buildImageUrl=function(t,e,i){return"http://file.pacra.cn/img/"+t+"/"+(e=e||0)+"x"+(i=i||0)+".jpg"},SelectDiv.prototype={},TipShow.prototype={init:function(){this.move(),this.show(),this.hide()},move:function(){this.items.mousemove(function(t){var e=t.pageX+15,i=t.pageY+15;this.doms.css({top:i,left:e}),this.doms.html($(t.currentTarget).attr("tip"))}.bind(this))},show:function(){this.items.mouseover(function(t){this.doms.show()}.bind(this))},hide:function(){this.items.mouseout(function(t){this.doms.hide()}.bind(this))}},SelectItem.prototype={},SelectItemHref.prototype={},RSF.regist("ShuidiIm"),ShuidiIm=function(){this.onMessage=function(t){},this.loginFailed=function(t){},this.ready=function(t){},this.socket=null,this.uid=0,this.serverReady=!1,this.readyEventList=[],this.messageEventList=[]},ShuidiIm.prototype={login:function(){this.socket.emit("login",{uid:this.uid,signature:this.signature})},setLogin:function(t,e){this.uid=t,this.signature=e},init:function(){this.socket=io("http://101.198.129.187:8181",{transports:["websocket"]}),this.socket.on("connect",function(){this.login()}.bind(this)),this.socket.on("disconnect",function(){console.log("已断开连接")}),this.socket.on("login-failed",function(t){console.log("登录失败"),this.loginFailed(t)}.bind(this)),this.socket.on("login-success",function(t){this.serverReady=!0;for(var e=0;e<this.readyEventList.length;e++)try{this.readyEventList[e]()}catch(t){console.log(t,"回调执行错误,跳过")}this.ready(t)}.bind(this)),this.socket.on("recv-private-message",function(t){var e=new ShuidiIm.Message;e.fid=t.fid,e.toid=this.uid,e.message=t.message,e.time=t.time,this.onMessage(e);for(var i=0;i<this.messageEventList.length;i++)try{this.messageEventList[i](e)}catch(t){console.log(t,"消息回调错误")}}.bind(this))},sendMessage:function(t){this.socket.emit("send-private-message",{to:t.toid,message:t.message})},addReadyEvent:function(t){this.serverReady?t():this.readyEventList.push(t)},addMessageEvent:function(t){this.messageEventList.push(t)}},RSF.regist("ShuidiIm.Message"),ShuidiIm.Message=function(){this.fid=0,this.toid=0,this.message="",this.time=""},ShuidiIm.getInstance=function(){if(!ShuidiIm.instance){var t=Shuidi.User.getInstance(),e=t.checkLogin();ShuidiIm.instance=new ShuidiIm,e&&(ShuidiIm.instance.setLogin(e,t.getSinature()),ShuidiIm.instance.init())}return ShuidiIm.instance},RSF.regist("Shuidi.User"),Shuidi.User=function(){this.uid=0,this.uid=this.checkLogin(),this.myUserInfo=null,this.unReadMessageList=null,this.linkNoticeCount=0},Shuidi.User.KEY_USER_ID="shuidi_user_id",Shuidi.User.KEY_USER_ID_SINATURE="shuidi_uid_token",Shuidi.User.prototype={checkLogin:function(){return RSF.getCookie(Shuidi.User.KEY_USER_ID)},getSinature:function(){return RSF.getCookie(Shuidi.User.KEY_USER_ID_SINATURE)},getMyInfo:function(t){return t=t||!1,new Promise(function(e,i){if(this.uid){if(this.myUserInfo&&!t)return void e(this.myUserInfo);$.ajax({url:"/user",data:{action:"my_homepage"},success:function(t){if(0===t.status){var n=t.data;this.myUserInfo=n,e(n)}else i()}.bind(this),error:i,fail:i})}else i()}.bind(this))},getOtherUserInfo:function(t){return new Promise(function(e,i){$.ajax({url:"/user",data:{action:"get_contact_detail",toid:t},success:function(t){if(0===t.status){var n=t.data;e(n)}else i()},error:i,fail:i})})},getMyContactList:function(){return new Promise(function(t,e){this.uid?$.getJSON("/user",{action:"get_contact_list"},function(i){if(0==i.status){var n=i.data;t(n)}else e(i)}):e(this.getUnLoginErrorMessage())}.bind(this))},getUnLoginErrorMessage:function(){return{status:202,message:"未登录"}},getUnReadMessageCount:function(t){return new Promise(function(e,i){if(this.uid){if(this.unReadMessageList&&!t)return void e(this.unReadMessageList);$.ajax({url:"/user",data:{action:"get_unread_message_count"},success:function(t){if(0===t.status){var n=t.data;this.unReadMessageList=n,e(n)}else i(t)}.bind(this),fail:this.error,error:this.error})}else i(this.getUnLoginErrorMessage())}.bind(this))},getLinkmanNoticeCount:function(t){return new Promise(function(e,i){if(this.uid){if(this.linkNoticeCount&&!t)return void e(this.linkNoticeCount);$.ajax({url:"/user",data:{action:"get_linkman_notice",type:"linkman"},success:function(t){0===t.status?t.data.notice_count>0&&(this.linkNoticeCount=t.data.notice_count,e(t.data.notice_count)):i(t)}.bind(this),fail:this.error,error:this.error})}else i()}.bind(this))},error:function(){}},Shuidi.User.getInstance=function(){return Shuidi.User.instance||(Shuidi.User.instance=new Shuidi.User),Shuidi.User.instance},RSF.regist("Shuidi.User.Storage"),Shuidi.User.Storage={put:function(t,e){t=this._convertKey(t),localStorage[t]=JSON.stringify(e)},get:function(t){if((t=this._convertKey(t))&&localStorage[t])return JSON.parse(localStorage[t])},clear:function(){localStorage.clear()},_convertKey:function(t){return this.unique&&(t=t+"_"+this.unique),t},unique:RSF.getCookie("shuidi_user_id")},RSF.regist("Shuidi.Index"),Shuidi.Index=function(){},Shuidi.Index.prototype={init:function(){$(document).ready(function(){$("form").submit(function(t){var e=$("#keywords").val().replace(/\s+/g,"");if(e.length<1)return $("#keywords").val(e),t.preventDefault(),!1})}),$(".key-search").autocomplete({source:function(t,e){$.getJSON("/",{action:"company_name_notice",company_name:$(".key-search").val()},function(t){t.data&&e($.map(t.data.company_list,function(t){return{label:t.company_name,value:t.company_name,desc:t.digest}}))})},select:function(t,e){location.href="/search?keywords="+e.item.value},position:{my:"right top",at:"right bottom+21%"},appendTo:$(".search-sug")})}},RSF.regist("Shuidi.Header"),Shuidi.Header=function(){},Shuidi.Header.prototype={init:function(){this.loadUnreadMessage(),Shuidi.User.getInstance().checkLogin()&&ShuidiIm.getInstance().addMessageEvent(function(t){this.showRedTip()}.bind(this))},showRedTip:function(){$(".notetip").show()},loadUnreadMessage:function(){var t=Shuidi.User.getInstance();t.checkLogin()&&(t.getUnReadMessageCount().then(function(t){t.length>0&&this.showRedTip()}.bind(this),function(t){}),t.getLinkmanNoticeCount().then(function(t){t>0&&(this.showRedTip(),$(".note_contact").css("display","block"))}.bind(this),function(){}))}};var ShuidiHeader=new Shuidi.Header;ShuidiHeader.init();